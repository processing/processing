0116 core
X make background() ignore transformations in JAVA2D
X   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=SoftwareBugs;action=display;num=1147010374
o createGraphics to not require defaults()
X   can't do, because an end() function must be called to clear the renderer
X add "hide stop button" arg for PApplet
X beginFrame/endFrame -> beginDraw/endDraw
X add new constant for the DXF renderer
X array utilities on Object[] are worthless.. fix it with reflection?
X   see if reflection will allow expand for all class types
X   expand, append, contract, subset, splice, concat, reverse
X typed version of array functions:
X   append(), shorten(), splice, slice, subset, concat, reverse
X   http://dev.processing.org/bugs/show_bug.cgi?id=115
X fix issue where processing applets would run extremely fast 
X   after having been starved of resources where there framerate dropped
X   http://dev.processing.org/bugs/show_bug.cgi?id=336
X added color/stroke/tint/fill(#FF8800, 30);
X test imageio with images that have alpha (does it work?)
X   nope, doesn't, didn't finish support
X   http://dev.processing.org/bugs/show_bug.cgi?id=350
X openStream() fails with java plug-in because non-null stream returned
X   http://dev.processing.org/bugs/show_bug.cgi?id=359

fixed in 0115 / quicktime 7.1
X color values on camera input flipped on intel macs
X   checked in a change for this recommended on qtjava list
X   http://dev.processing.org/bugs/show_bug.cgi?id=313

really old stuff
o get loop, noLoop, redraw, and framerate all working in opengl
o   needs custom animator thread..
o depth() shouldn't be needed for opengl unless actually 3D
o   right now the camera doesn't get set up unless you call depth()
o box and sphere are broken in gl
o what should the update image function be called?

_ fix the internal file chooser so that people don't need to make their own
_   threading is a problem with inputFile() and inputFolder()

_ jai handles setting image size
_  PNGEncodeParam png = PNGEncodeParam.getDefaultEncodeParam(bufImage);
_    png.setPhysicalDimension(round(dpi*39.370079), round(dpi*39.370079), 1);
_    JAI.create("filestore", bufImage, filename+".png", "PNG");
_ jpeg loading may be extremely slow (loadBytes?)
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=Contribution_Responsive;action=display;num=1150064360

_ svg loader is on the list for 1.0
_   maybe include as part of PApplet (casey thinks so)
_ svg output, make simple version of PGraphicsSVG based on PGraphicsPDF

_ cameraXYZ doesn't seem to actually be used for anything
_   since camera functions don't even look at it or set it

_ file for 2.0.. stroke on type

_ saveFrame() not working for casey
_   problem with tiff loading in photoshop etc
void setup() {
size(400, 400);
noLoop();
}
void draw() {
line(0, 0, width, height);
line(0, width, height, 0);
saveFrame();
}

_ urls with ampersands don't work with link()
_   Runtime.getRuntime().exec("cmd /c start " + url.replaceAll("&","^&"));
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=SoftwareBugs;action=display;num=1149974261

_ fonts in java 1.5 have changed again
_   appears that asking for the postscript name no longer works
_   fix "create font" and associated font stuff to straighten it out

_ blend() mode param should be moved to the front
_   make sure there's parity with the copy() functions
_   remove single pixel blend functions

_ add to docs: save() on a PImage needs savePath() added

_ background() with an image ignores the tint.. it's basically like set()

_ gl point stuff is a problem
_   need to implement point() as actual gl points
_   this means adding points to the pipeline

_ make version of loadbytes that checks length of the stream first

_ saveStrings(filename, strings, count) 
_   otherwise the save is kinda wonky
_   or maybe that should just be done with the array fxns
_ blend() should prolly have its mode be the first param
_ some way to vertically center text
_   either by setting its middle vertical point
_   or by setting a top/bottom for the rectangle in which it should be placed
_   maybe textAlign(CENTER | VERTICAL_CENTER);
_   or TOP, MIDDLE, and BOTTOM
_   textAlign(CENTER | TOP);
_   could even have textAlign(CENTER) and textAlign(TOP) not replace each other
_   or textAlign(LEFT, MIDDLE); -> this one seems best

_ only call defaults() when it's part of a PApplet canvas
_   don't want to hose PGraphics for others
_   both for pdf, and making background transparent images
_ background(0, 0, 0, 0) is the way to really clear everything with zeroes
_   or background(0, 0), but the former is prolly better conceptually
_ if calling beginPixels inside another, need to increment a counter
_   otherwise the end will look like it's time to update
_   which may not actually be the case
_   i.e. calling filter() inside begin/end block

_ PGraphics.clear() problem from workbench and malware stuff
_   had to put synchronized onto draw and size()
_   actually it'll work if it's only on size()
_   the sync on the mac hangs an applet running by itself
_     even though it seems to be ok for a component

_ make framerate into frameRate (to match frameCount)
_ remove image(filename) and textFont(filename) et al.
_ hint(DISABLE_NATIVE_FONTS) to disable the built-in stuff?
_ loading lots of images is a problem, describe how to unload
_   is it possible? necessary to call delay(5) or something?

_ AIOOBE on PLine 757.. halts renderer

X begin/endPixels.. change has been made
_   on PImage, sets a flag that marks it to be updated on next render
_   for PImage, begin after an end is ignored, no pixels are re-loaded
_     the "changed" bit gets turned off when the PImage is rendered
_   for subclasses of PGraphics, the reload bit needs to be set on endFrame
_   filter() checks to see if inside begin/endPixels, if so doesn't call
o   if line() is called inside beginpixels, call updatepixels?
_   when NPE on line with pixels[], suggest user includes beginPixels
_ need to test/straighten out load/update pixels
_   loadPixels() and updatePixels() only need to be used when 
_   touching pixels[]. All other functions including get(), set(),
_   filter(), etc shouldn't need them. 
_ fjen says blend() doens't work in JAVA2D
_   the functions are fairly well separated now in PMethods
_   just go through all the stuff to make sure it's setting properly
_ don't do a loadPixels unless an updatePixels has completed
_   tho this won't affect anything, since either it's an image buffer
_   or it's the PGraphics object, which does an updatePixels() immediately
_ if (modified) don't loadPixels again, just ignore it
_   make a note that updatePixels() only sets a flag in PImage
_     (but not PGraphics, which does it immediately)

_ with network connection
_   download a copy of the source for 0069, get the renderer 
_   svn mv PGraphics2 PGraphicsJava

_ for subclasses, make it easy to grab the structure of vertices
_   actually, just use PShape internally and this will be easier

_ add notes about fixing serial on the mac to the faq (and link to bug)

_ endRaw() is a problem with hint(ENABLE_DEPTH_SORT)
_   because the triangles won't be rendered by the time endRaw() is called
_   force depth sorted triangles to flush
_ fix dxf export bug
_ fix erik's problems with export (also in bugs db)
_ check into ricard's problems with beginRecord()
_ should beginRecord inherit settings from its parent renderer?
_   textFont() is null on beginRecord
_   same would be the case for strokeWeight, background, etc.
_   http://dev.processing.org/bugs/show_bug.cgi?id=346


_ bring back the old P2D, rename PGraphics2 into PGraphicsJava
_ remove POLYGON, LINE_LOOP, LINE_STRIP

_ an image marked RGB but with 0s for the alpha won't draw in JAVA2D
_   also if transparency set but RGB is setting, still honors transparency
_   http://dev.processing.org/bugs/show_bug.cgi?id=351

_ this produces a dark blue background: 
colorMode(RGB, 100);
background(128);

_ image memory use.. how to handle lots of images
_   need to figure out exactly how they should/can unload
_   

_ opengl keeping memory around.. 
_   could this be in vertices that have an image associated
_   or the image buffer used for textures
_   that never gets cleared fully?
_ resizing opengl applet likely to cause big trouble
_   componentlistener should prolly only do size() command outside of draw

_ make the opengl textmode shape stuff get better and use PShape

_ docs: get/set are faster way to do image, but no tint, no translations
_ textSpace(SCREEN) for opengl and java2d
_   don't use loadPixels for either
_   use font code to set the cached color of the font, then call set()
_   although set() with alpha is a little different..
_ textMode(SHAPE) faster in opengl
_   cache for tyhpe should be per-renderer
_   because opengl needs vectors, but also the image cache for textures

_ how to clear the screen with alpha? background(0, 0, 0, 0)?
_   background(EMPTY) -> background(0x01000000) or something?

_ introduce calc()
_ tint() sets texture color, fill() is ignored with textures

_ cmyk version of tiff encoder code?

_ when turning smoothing on, internal lines of shapes are visible
_   need to turn off smoothing for the interior of shapes
_   http://dev.processing.org/bugs/show_bug.cgi?id=200
_ gl smoothing.. how to disable polygon but keep line enabled
_   or at least make a note of this?
_   leave smooth off, get the gl object, then enable line smooth

_ get()/set() in PGraphicsJava don't bounds check

_ add better error messages for all built-in renderers
_   i.e. "import library -> pdf" when pdf is missing

_ need to merge sorting/drawing of lines and triangles
_   lines will occlude tris and vice versa
_   will need to split each based on the other
_   sort issues will affect both

_ gray background in pdf (using both gl and p3d)
_   http://dev.processing.org/bugs/show_bug.cgi?id=324
_ using gl, lines don't show up in pdf with record (they're ok with p3d)
_   http://dev.processing.org/bugs/show_bug.cgi?id=325

_ beginShape() moving
_   merge POLYGON, LINE_LOOP, LINE_STRIP?

_ fix tint() for PGraphics3 (what could be wrong?)
_   tint() honoring alpha but not colored tint
_   maybe not setting fill color when drawing textures
_   guessing it's an implementation issue in sami's renderer
_   check with the a_Displaying example and tint(255, 0, 0, 100);
_   http://dev.processing.org/bugs/show_bug.cgi?id=90
_   is fill() not coloring textures properly?
_     don't need to apply tint() to textures, supposed to use fill color
_ pixel operations are broken in opengl
_   get(), set(), copy(), blend(), loadPixels, updatePixels() 
_   set(x, y, image) y reversed in openGL 
_   http://dev.processing.org/bugs/show_bug.cgi?id=91
_ when closing a sketch via the close box, make sure stop() getting called


examples
_ need a pdf example (for size(), beginRecord())
_ need beginRaw() examples using dxf and pdf


. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 


_ sonia (and anything awt) is locking up on load in rev 91
_   prolly something w/ the threading issues
_   paint is synchronized in 0091
_     however this is a necessity, otherwise nasty flickering ensues
_     and using a "glock" object seems to completely deadlock
_   http://dev.processing.org/bugs/show_bug.cgi?id=46

_ when an exception comes through during cameraEvent, not printed
_   need to show an actual stack trace (InvocationTargetEx) 
_   because otherwise it's impossible to debug this stuff

_ registerSize() in arcball is causing trouble
_   some sort of infinite loop issue

_ updatePixels() is slow to create a BufferedImage
_   therefore the incomplete rendering
_   could this be an issue fixed by a MediaTracker?

more pdf/recording stuff
_ figure out what's up with type on osx
_   sometimes bicubic vs quadratic beziers are mixed up in fonts
_   not sure if it's limited to osx or what
_ document how to switch to next page
_   maybe background() should do this automatically?

_ lookat is now camera(), but not fixed in the docs
_   add notes to the faq about the camera changes on the changes page

_ on osx, System.err isn't writing in things like createGraphics()
_   but doing a printStackTrace(System.out) works
_   something weird happening with one of the streams shutting down?

check to see if these are working
o when re-calling size() with opengl, need to remove the old canvas
o   need to check to see if this is working properly now
_ registering font directories in pdf.. is it necessary? 
_   (commented out for 0100)
_ 404 error because first searches applet directory in isometricblocks
_ "this file is named" errors don't like subdirectories
_   need to strip off past the file separator or something
_ passing applet into createGraphics.. problems with re-adding listeners
_   since the listeners are added to the PApplet
_   i think the listeners aren't re-added, but need to double check


. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 


threading mess
_ claim that things are much slower in 107 vs 92
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=Suggestions;action=display;num=1141763531
_ need to move off anim off the main event thread
_   move away from using method like display
X temporarily rolling back major thread changes
X major threading change to use wait()/notifyAll() instead of interrupt/sleep
_ noLoop() at end of setup is prolly b/c of interruptedex
_   need to not call Thread.interrupt()
_ opengl + noLoop() causes InterruptedException
_   http://dev.processing.org/bugs/show_bug.cgi?id=164
X   check to see noLoop() breakage is fixed in 92 vs 91
X     checked, not fixed
_ noLoop() broken on opengl
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=SoftwareBugs;action=display;num=1115330568;start=0
_   http://dev.processing.org/bugs/show_bug.cgi?id=164
_ figure out why 1024x768 image takes 3.5 seconds to load
_   would using a BufferedImage work better?
_   is the image actually a BufferedImage so PixelGrabber is a waste?
_ too much object creation in java2d
_   causes inconsistency/hiccups as the gc runs?
_ fix the flicker in java2d mode
_   http://dev.processing.org/bugs/show_bug.cgi?id=122
_   framerate(30) is still flickery and jumpy..
_   not clear what's happening here
_   appears to be much worse (unfinished drawing) on macosx
_     try turning off hw accel on the mac to see if that's the problem
_ framerate that's reported is out of joint with actual
_   seems to be aliasing effect of low resolution on millis()
_   so rates coming out double or half of their actual
_   probably need to integrate over a rolling array of 10 frames or so
_ sketches often freeze when stop is hit on an HT machine
_   need to test the examples cited on pardis' machine
_   http://dev.processing.org/bugs/show_bug.cgi?id=232
_ debug NumberFormat InterruptedException on dual proc machine
_   use notify() instead of interrupt()? 
_   or Thread.currentThread() should be checked first?

_ ArrayIndexOutOfBoundsException in PLine
_   http://dev.processing.org/bugs/show_bug.cgi?id=246

_ dataFolder() might be flawed b/c it's referring to contents of jar file
_   for input, better to use openStream
_   clear up the documentation on this

_ tint() and noTint() switching problem in P2D
_   http://dev.processing.org/bugs/show_bug.cgi?id=222

_ when using PGraphics, must call beginFrame() and endFrame()
_   also need to be able to turn off MemoryImageSource on endFrame
_   call defaults() in beginFrame()

_ add texture support to recordShapesRaw (this might be pretty obscure...)

_ should PGraphics be a base class with implementations and variables?
_   then PGraphics2D and PGraphics3D that subclass it?
_   (or even just PGraphics2 and PGraphics3)
_   also rename PGraphics2 to PGraphicsJava
_   it's goofy to have the naming so different

X tweak to only exit from ESC on keyPressed
_   probably should just make this a hint() instead

_ add a e2mouseX and e2mouseY 
_   so that the prev mouse location is still good on mouseReleased
_   http://dev.processing.org/bugs/show_bug.cgi?id=170

_ add auto-install of cab file inside applet.html
_   http://dev.processing.org/bugs/show_bug.cgi?id=181
_   http://java.sun.com/j2se/1.4.2/docs/guide/plugin/developer_guide/using_tags.html
_   http://java.sun.com/j2se/1.5.0/docs/guide/javaws/developersguide/launch.html#creating
_   http://java.sun.com/update/1.4.2/jinstall-1_4_2_09-windows-i586.cab
for the 1.5 versions:
_   http://java.sun.com/update/1.5.0/jinstall-1_5_0_03-windows-i586.cab

_ related to the fill bugs: when fill is identical, no fill applied
_   http://dev.processing.org/bugs/show_bug.cgi?id=169

_ update run.bat for new quicktime
_   unfortunately this is messy because qtjava sometimes has quotes
_   and qtsystem might be somewhere besides c:\progra~1

_ STROKE_WEIGHT field in PGraphics3 is a disaster, because it's an int
_   use the SW from vertex instead.. why set stroke in triangle vars at all?
_   currently truncating to an int inside add_line_no_clip
_   need to clean all this crap up

_ stop() not getting called
_   http://dev.processing.org/bugs/show_bug.cgi?id=183
_   major problem for libraries
_   and start() is supposedly called by the applet viewer
_   http://java.sun.com/j2se/1.4.2/docs/api/java/applet/Applet.html#start()
_   need to track this stuff down a bit

_ clipboard implementation as example or as part of api
_   http://dev.processing.org/bugs/show_bug.cgi?id=167

_ get creating new PGraphics/2/3 working again
_   http://dev.processing.org/bugs/show_bug.cgi?id=92
X   maybe createGraphics(200, 200) to create same as source
X   createGraphics(200, 200, P2D) to create 2D from 3D
_   also, drawing a PGraphics2 doesn't seem to work
_   new PGraphics2 objects are set as RGB, but on loadPixels/updatePixels
_     they're drawn as transparent and don't have their high bits set
_ why aren't background() / defaults() being called for opengl?
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=Contribution_3DOpenGL;action=display;num=1118784331
_ some optimizations from zach
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=os_core_pde;action=display;num=1121670787

_ bspline or nurbs before 1.0? 
_   probably later, want to do the 3D/arch stuff correctly


. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 


_ PApplet.main(new String[] { "classname }) won't pass in args.. grr
_   PApplet.main(append(new String[] { "classname }, args));



////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////

GRAPHICS LIBRARY

A hybrid of OpenGL (3D Graphics) and some aspects of Postscript (Fill, Stroke)
The graphics library was formerly called Bagel.


CORE / PApplet

_ would be cool if could sort w/o the sort class..
_   meaning use reflection to sort objects, just by implementing a few methods
_   would be much simpler and less confusing than new Sort() etc 
_   or would it be ridiculously slow?
_ make a PException that extends RuntimeException but packages an ex?
_   http://java.sun.com/docs/books/tutorial/essential/exceptions/runtime.html
_ is mousePressed broken with noLoop() or redraw()?
_ check for what else inside PApplet should be static
_   maybe catch RuntimeExceptions in the called sub-functions
_   that way more stuff can be static w/o losing useful error handling
_   (emitting errors when closest to source.. i.e. w/ the filename)
_ size() inside draw is missing a new call to cameraMode, etc
_ fix param() to use a sketch.properties file when run as an app
_   make this also be used in generating the html file
_ fix link() to handle relative URLs
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1081710684;start=0
_ put SecurityException things around file i/o for applets
_   rather than checking online(), since applets might be signed
_ saveFrame() at the end of a draw mode program is problematic
_   app might exit before the file has finished writing to disk
_   need to block other activity inside screenGrab until finished
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1081706752
_ problems with defining fill(255) vs fill(0xff808080)
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Syntax;action=display;num=1083650609
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Syntax;action=display;num=1082481891
_ test winding polygons in different directions
_ test lighting to see how it compares with gl
_ better lockout inside beginShape() to keep other things from happening
_ is quad strip broken or not behaving as expected?
_   may be correct, it worked for nik
_ inside draw() mode, delay() does nothing
_   delay might be a good way to signal drawing to the screen/updating
_ catch security exceptions around applet i/o calls
_   not just for saving files, but provide better error msgs when
_     attempting to download from another server
_ ed's thread re: fullscreen strategies
_   could add a new BApplet that uses BufferStrategy?
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Programs;action=display;num=1081335361;start=15
_ placement of 100x100 items is odd
_   happens with P3D and maybe also P2D?
_   http://dev.processing.org/bugs/show_bug.cgi?id=128
_ fileInput() and fileOutput() may not agree with draw()
_   not yet verified
_   can only be used inside of setup()?
_ cellular automata examples broken
_ size() has memory limitations (pitaru)
_   catch OutOfMemoryError inside size() and let the user know
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1038847001
_ files not in the data folder (works in env, not in sketch)


CORE / PApplet - main()

_ refactor PApplet.main() and Runner.startInternal() to remove duplication
_   http://dev.processing.org/bugs/show_bug.cgi?id=245
_ present mode is flakey.. applet doesn't always come up
_   seems like hitting stop helps shut it down?
_   is full screen window not being taken down properly?
_   has this fixed itself, or is it an issue with launching externally?
_ implement full screen mode.. this takes over the screen as best it can
_   size(screen.width, screen.height, OPENGL);
_   if size is screen.width and screen.height, does its best
_   needs to get the size of the main screen
_   this probably works but just needs to be tested
_   exceptions in full screen mode will quit the app completely
_     can't keep window open because things are hosed
_   default is that full screen app doesn't cover multiple displays
_     this is fine since opengl can't usually go across both
_     but include an example for how to use full in gl 
_ ability to select monitor via preferences panel
_   this applies to any applet that's run externally currently (verify)
_   make it also work with anything that's run inside of p5 itself
_     this means changing the frame creation code inside Runner
_   check current present code with multiple monitors
_ hitting cmd-q when an applet is running quits p5 (on macosx)
_   but cmd-q when running externally is ok because it just quits
_   is there a way to catch cmd-q when running a sketch? 
_     so that it could avoid quitting if the sketch hasn't been stopped
_     or if the sketch window is foremost
_     maybe a hack where a new menubar is added? 


CORE / PFont and text()

_ leading looks too big, at least in PGraphics2 with news gothic
_   though it may be the converted version of the .ttf?
_ font encoding issues 
_   java seems to force straight windows encoding.. (problem for pi fonts)
_   opentype/cff fonts don't work with live loading from the app
_   many (all?) opentype fonts won't show up or aren't supported
_     this may be only cff fonts that have trouble
_   when encoding is not the standard encoding, problematic
_     so sonata otf and sonata don't seem to have any chars at all
_ available font issues
_   is getFontList returning a different set of fonts from device2d?
_     try it out on java 1.3 versus 1.4
_   getAllFonts() not quite working for many fonts
_   i.e. Orator Std on windows.. macosx seems to be ok
_   is getFamilyNames() any different/better?
_   when did this break? 1.4.1? 1.4.x vs 1.3?
_   may be that cff fonts won't work?
_   or is it only those with ps names?
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=SoftwareBugs;action=display;num=1117445969
_ createFont not working from applets (only with .ttf?)
_   throws a security exception because of the reflection stuff
_   http://dev.processing.org/bugs/show_bug.cgi?id=101
_ text() with a z coordinate is now using translate, very slow
X   also puts up a weird error message about translate() in 2D mode
_ make screen space fonts use get/set as well?
_   too much to debug on their own
_   unfortunately tint not set with setImpl, but...
_ optimize textMode(MODEL) with textMode(SCREEN)
_   in PGraphics and PGraphics3, check to see if matrix is within epsilon
_   of one of the rotation matrices (many fewer steps) 
_   if identity, or just translate, or a rotate, make OBJECT into SCREEN
_ not having kerning really blows
_   could this be pulled from the OpenType font stuff? 
_   it could be placed at the end of the file
_ not having fractional widths on small fonts really blows
_   screen space text looks crappy
_ working with vector fonts? 
_   need to be able to handle shapes within shapes (reverse winding)
_   ftgl: main code is in FTVectoriser
_   uses gluTessBeginContour and gluTessEndContour
_   and then does 5 step sizes for each curveto


CORE / PGraphics

_ have createGraphics() create a completely transparent image
_   and also not require defaults() to be called
_ point() doesn't work with some graphics card setups
_   particularly with opengl and java2d
_   http://dev.processing.org/bugs/show_bug.cgi?id=121
_   http://dev.processing.org/bugs/show_bug.cgi?id=269
_ cairo tesselation used: 
_   John Hobby, Practical Segment Intersection with Finite Precision
_   Output. Computational Geometry Theory and Application, 13(4), 1999.
_ possible leads re: rendering stuff
_   http://people.csail.mit.edu/bmcutler/
_   http://people.csail.mit.edu/fredo/
_ finish implementation so 1.1 support can return
_   http://dev.processing.org/bugs/show_bug.cgi?id=125
_ alter bezier and curve matrices to use PMatrix
_   float array stuff is redundant with code that's in PMatrix
_   and PMatrix has to be included even w/o P3D so...
_ y2 position of rectangles not same as y2 position of lines
_   happens when the rectangle is flipped on the x or y axis
_   probably a hack that draws the "last" point differently
_ beginShape() 
_   don't allow you to draw stroked items unless stroke() is called
_   don't allow beginShape() if shape is already set
_     (otherwise will cause some very strange errors)
_ figure out a good model for adaptive sizing of circles
_   also goes for arcs, though will be weighted based on arc size
_ point() issues
_   point() being funneled through beginShape is terribly slow
_     go the other way 'round
_   sometimes broken, could be a problem with java 1.5? (was using win2k)
noStroke();
colorMode(RGB, 100);  
for(int i=0; i<100; i++) {  
  for(int j=0; j<100; j++) {  
    stroke(i, j, 0);  
    point(i, j);  
  }  
}  
As an aside, set() is at least 10x faster, and 
perhaps should be used in these examples anyway. 
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=SoftwareBugs;action=display;num=1114204116;start=0
_ lines
_   z value hack for lines is causing trouble for 2D
_     http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1089737928;start=0
_   rewrite line and stroke code, it's a buggy mess
_     lines become 2 pixels thick after a 3D transform 
_     better handling of single-pixel special case
_       flat_line_retribution is a hack, can go away
_ lines are conflicting with type in 2D
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1094174791;start=0
_ mgorbet stroke transparency problem
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1076383048;start=0
_   make sure line() commands don't try to have a fill
_   box is not opaque
_     problem is that lines are drawn second
_     one pixel lines have no z value.. argh
_     bug re: 3d depth sorting on lines
_     http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1043894019;start=0
_     http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1042004618
_     translate(58, 48, 0); 
_     rotateY(0.5);
_     box(40);
_   line endcaps and line joins. strokeMode()
_     lower priority, but at least leave room
_ strokeWeight is still broken
_   setting stroke width on circle makes odd patterns
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1077013848;start=0
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1080347160
_ more weirdness with stroke on rect, prolly not alpha
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1085799526
_ rect is not getting it's stroke color set
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1073582391;start=0
_ weird problem with drawing/filling squares
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1077226984
_ alpha of zero still draws boogers on screen
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1073329613;start=0
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1080342288;start=0
_ break apart functions into local (placement) and override (blitting)
_   just have a "thin_flat_line" option in opengl code
_ color
_   rounding errors on color conversion
_   colorMode(RGB, 1.0); colorMode(255); println(red(color(0.5,1,1)));
_   will return 127, instead of 128.
_ curves
_   non-homogenous coloring for curve vertices
_ implement curveTangent
_   fix-up the curve_init() and the rest to use matrices
_     and not have ugly names (i.e. just g.curveDetail is good)
_ ellipse problems
_   weird ellipse bug with an alpha line in same image
_     http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1083221401;start=0
_   scaled ellipse showing up as a hexagon
_     http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1083674213
_     http://processing.org/discourse/yabb/YaBB.cgi?board=Syntax;action=display;num=1084652597;start=0
_   problem with the fill
_     http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1077834735
_   z values not set properly on ellipses?
_     http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1068752615
_   ellipses are just plain ugly
_     http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1073409011;start=0
_   toxi ellipses don't adapt properly with transformations
_ more blend() modes (the five listed on the thread below?)
_   http://dev.processing.org/bugs/show_bug.cgi?id=132
_   figure out what the modes should actually be: 
_     photoshop: normal, dissolve; darken, multiply, color burn, 
_                linear burn; lighten, screen, color dodge, linear
_                dodge; overlay, soft light, hard light, vivid light, 
_                linear light, pin light, hard mix; difference, 
_                exclusion; hue, saturation, color, luminosity
_     illustrator: normal; darken, multiply, color burn; lighten,
_                  screen, color dodge; overlay, soft light, hard light; 
_                  difference, exclusion; hue, sat, color, luminosity
_     director: Copy, Transparent, Reverse, Ghost, Not copy, 
_               Not transparent, Not reverse, Not ghost, Matte, Mask;
_               (below seems more useful:
_               Blend, Add pin, Add, Subtract pin, Background transparent,
_               Lightest, Subtract, Darkest, Lighten, Darken
_     flash: 
_   DIFFERENCE: C = abs(A-B);
_   MULTIPLY: C = (A * B ) / 255
_   SCREEN: C= 255 - ( (255-A) * (255-B) / 255 )
_   OVERLAY: C = B < 128 ? (2*A*B/255) : 255-2*(255-A)*(255-B)/255
_   HARD_LIGHT: C = A < 128 ? (2*A*B/255) : 255-2*(255-A)*(255-B)/255
_   SOFT_LIGHT: C = B < 128 ? 2*((A>>1)+64)*B/255 : 255-(2*(255-((A>>1)+64))*(255-B)/255)
_ clipping planes
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1058491568;start=0
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1052313604;start=0
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_Software;action=display;num=1095170607;start=0
_   things are flying into the camera and halting apps
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1042699742
_   NullPointerException apparently when things way offscreen
_     i.e. glyphrot with scale set to 4
_     or at least that things get ridiculously slow
_     clipping issues here.. but also something in scan converter
_     not clipping areas from offscreen
_       huge geometry slows things way down


CORE / PGraphics2

_ make get/getImpl for PGraphics/PGraphics2
_   make sure there's a loadPixels/updatePixels in PGraphics2
_ slow on java2d, fast on p3d
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=SoftwareBugs;action=display;num=1115276250;start=3
_ set(x, y, image)
_   x, y not setting with processing
_ don't let users on < 1.3 load JAVA2D
_ set upper bound on framerate so as not to completely hose things?
_ textSpace(SCREEN_SPACE) needs to be faster
_   need flat image implementation that takes no transforms
_   along with 90, 180 and 270 versions of it as well
_   tie to glDrawPixels.. how to clear matrix properly for that?
_ catch sun.dc.pr.PRException?
_   http://dev.processing.org/bugs/show_bug.cgi?id=104
_ gradient-painted lines
Color c = new Color(0x00FFFF00, true);
GradientPaint gradient = 
  new GradientPaint(0,0,Color.red,100,100,c);
GeneralPath gp = new GeneralPath();
gp.moveTo(10, 10);
gp.lineTo(100, 90);
gp.lineTo(20, 50);
gp.closePath();
Graphics2D g2 = ((PGraphics2)g).g2;
g2.setPaint(gradient);
g2.draw(gp);


CORE / PGraphics3

_ rect() changes size as it changes position
_   http://dev.processing.org/bugs/show_bug.cgi?id=95
_ lines skip on 200x200 surface because of fixed point rounding error
_   http://dev.processing.org/bugs/show_bug.cgi?id=267
_ polygons perpendicular to axis not drawing
_   is this a clipping error?
_   probably a triangulation error, because triangles work ok
_   http://dev.processing.org/bugs/show_bug.cgi?id=111
_ concave polygons having trouble if points come back to meet 
_   tesselator/triangulator gets confused when points doubled up
_   might need to avoid previous vertex hitting itself
_   http://dev.processing.org/bugs/show_bug.cgi?id=97
_   graphics gems 5 has more about tessellation
_ P3D not doing bilinear interpolation in text and images 
_   because smooth() has to be set (and smooth throws an error in P3D)
_   how should this be handled? a hint? allowing smooth()?
_   probably just allow smooth() but don't smooth anything
_ ortho() is doing things strangely
_   seems to be mapping to 0, 0 - width/2, height/2
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=SoftwareBugs;action=display;num=1115919744;start=0
_ odd error with some pixels from images not drawing properly
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=SoftwareBugs;action=display;num=1115681453
_ simon reports borders on P3D and OPENGL if background() not called
_ clipping not yet completely implemented
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=SoftwareBugs;action=display;num=1114184516
_ Stroking a rect() leaves off the upper right pixel
_ PPolygon no longer in use and PLine is a mess
_   make a version of PGraphics3 that uses it for more accurate rendering?
_ texture mapping
_   very odd, "doom era" stuff
_   would it be possible to have a 'slow but accurate' mode?
_   http://dev.processing.org/bugs/show_bug.cgi?id=103


CORE / PImage
_ loadImage(url) having trouble with jpeg
_   actually it's an issue with some types of jpeg files
_   http://dev.processing.org/bugs/show_bug.cgi?id=279
_   java.lang.IllegalArgumentException: 
_     Width (-1) and height (-1) cannot be <= 0
_   identical to what happens when the image data is bad
_     for instance, trying to load a tiff image with the jpg loader
_ png image loading problems
_   http://dev.processing.org/bugs/show_bug.cgi?id=305
_ don't grab pixels of java2d images unless asked
_   this is the difference between a lot of loadPixels() and not
_   so important to have it in before beta if that's the change

_ add ability to control jpeg compression level with save() and saveFrame()
_   http://dev.processing.org/bugs/show_bug.cgi?id=342
_ also when drawing an image, sense whether drawn rotated
_   specifically, if drawn rotated 90 in either direction, or 180
_   if just rotate/translate, then can use SCREEN_SPACE for fonts
_ alpha not set on saveFrame, so can't be used in photoshop as a layer
_   http://processing.org/discourse/yabb/YaBB.cgi?board=general;action=display;num=1078441623
_ should image i/o be moved into PImage?
_   still needs applet object, so it's not like this is very useful
_   external PImage methods could take stream, i suppose..
_ figure out why tiff images won't open with after effects
_   http://dev.processing.org/bugs/show_bug.cgi?id=153
_   open with photoshop, resave, see which tags change
_     specifically, which tags that were in the original image file
_     perhaps something gets corrected? 
_ loadImage() using spaces in the name
_   if loadImage() with spaces when online(), throw an error
_ get tiff exporter for p5 to support argb and gray
_   would also need to modify the tiff loading code, 
_   because the header would be different
_   http://dev.processing.org/bugs/show_bug.cgi?id=343


CORE / Mac OS X

_ change how java version is determined on mac
_   http://developer.apple.com/technotes/tn2002/tn2110.html
_   (this tn provides no guidance for macos8/9.. gah)
_ little window showing up on macosx when running
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1081284410
_ flicker happening on osx java 1.4, but not 1.3:
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1083184297
_ cursor() broken in applets on macosx?
_   or is it a java 1.4 versus java 1.3 problem?
_   http://processing.org/discourse/yabb/YaBB.cgi?board=Proce55ing_software_bugs;action=display;num=1081645955


CORE / General 

_ remove some of the bloat, how can we make things more compact?
_   i.e. if not using 3D, can leave out PGraphics3, PTriangle, PLine
_   PPolygon isn't currently used for anything, should remove it
_   http://dev.processing.org/bugs/show_bug.cgi?id=127


////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////


PGraphicsGL

_ polygon z-order depth sorting with alpha in opengl
_   complete the implementation of hint() with proper implementation
_   http://dev.processing.org/bugs/show_bug.cgi?id=176
_ opengl needs to shut itself down properly when closing applet
_   otherwise can crash the whole browser
_ get rid of some of the sillier IntBuffer stuff where it's not needed
_   use the version of the prototypes that use an offset into the array
_   need to test performance either way
_ when creating a new PImage on every frame, slurps a ton of memory
_   workaround is to write the code properly, but suggests something bad
_   http://dev.processing.org/bugs/show_bug.cgi?id=150
_ make a note about the anti-aliasing types in the faq
_   polygon vs line etc.. may want to enable lines but disable polys
_ y may be flipped in modelX/Y/Z stuff on opengl
_ ortho() behaving differently in P3D vs OPENGL
_   http://dev.processing.org/bugs/show_bug.cgi?id=100
_ gl points not working again
_ invocationtargetexception in gl with aioobe:
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=SoftwareBugs;action=display;num=1115185737
_ metaballs example dies when using box()
_   long string of exceptions, which are also missing their newlines
_ resolve ARGB versus RGBA versus just A issues for fonts
_   make sure that current scenario works identically on mac
_   if so, just switch the image code to expect alpha in the high bits
_   fonts probably need to be RGBA, not ALPHA style images
_   there's nothing really ALPHA about them?
_ gl alpha on images when flipped around backwards
_   will sorting based on depth help this? also ask simon for ideas
_ rewrite getImpl/setImpl inside opengl
_ bit shifting in opengl, get down to 2 ops by using other image modes
_   i.e. ABGR_EXT might allow for just two shifts instead of 4
_ allow access to native pixel buffer in opengl and power of 2
_   so that no need to copy/update everything
_ need to write an error if people try to use opengl with 1.3 (i.e. on export)
_   don't let users with java < 1.4 load OPENGL
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=Contribution_3DOpenGL;action=display;num=1114368123;start=3
_ grabbing sun.cpu.endian throws a security exception with gl applets
_   http://processing.org/discourse/yabb_beta/YaBB.cgi?board=Contribution_3DOpenGL;action=display;num=1114368123;start=3
_ strokeWeight() doesn't work in opengl or p3d
_ how to handle gluTessVertex calls
_   need to re-map through the regular "vertex" command, 
_   but that makes things messy because the glu calls make calls to vertex()
_   and i don't want an additional "pathVertex()" function


PGraphicsAI

_ illustrator export / rendering mode
_   also postscript or pdf export?
_   update illustrator code to use core api
_     even if not actually working properly.. just in naming of things
_   sorting of polygons/lines on simple painters algorithm
_   better lighting model to show darkness at various depths
_     maybe just ultra-high res bitmaps from gl
o   version of BApplet that replaces g. with ai. or pdf.


PGraphicsPDF

_ pdf export ignoring transparency on linux
_   check to see if this is the case on other linux machines
_   seems to be working fine on windows
_   http://dev.processing.org/bugs/show_bug.cgi?id=345
