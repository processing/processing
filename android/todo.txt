0190 android
X allow screenWidth/Height as parameters to size()
X   right now would cause NumberFormatException
X add notes to the wiki about the size() method
X make sure sketchRenderer()/sketchWidth()/sketchHeight() are working on desktop
o   see about getting them documented in the reference
X   do a writeup of the size() method in the wiki
X size() command is currently ignored in Android
X   http://dev.processing.org/bugs/show_bug.cgi?id=1397
X   http://code.google.com/p/processing/issues/detail?id=211
X Implement P3D, OpenGL, A3D for Android
X   http://dev.processing.org/bugs/show_bug.cgi?id=1396
X fix mouseX/Y mapping when using smaller screen sizes
o image() problems (includes sketch)
o   http://dev.processing.org/bugs/show_bug.cgi?id=1565
o next time the avd is updated
o   remove old AVDs because their APIs might be out of date
o   probably need to name AVDs based on their API spec
o   http://dev.processing.org/bugs/show_bug.cgi?id=1526
o   http://code.google.com/p/processing/issues/detail?id=249
X text ascent/descent problem, text("blah\nblah") doesn't work properly
X   reverting to using the PGraphics version rather than P2D
X   because Paint.ascent() is returning negative values
X properly handle setting whatever permissions are necessary
X   added dialog box to set permissions 
X re: rewriting manifest on each build
o   http://dev.processing.org/bugs/show_bug.cgi?id=1429
X   http://code.google.com/p/processing/issues/detail?id=221
X change skewX/Y to shearX/Y
_   need updated reference for this

_ throw an error if a file in the 'data' dir ends with .gz

create new keystore
location: [   ] (browse)
password: [   ]
confirm: [   ]
then asks for 
alias, password, confirm, validity (years)
first/last name, ounit, org, city/locale, state/province, country code (xx)

_ application local storage: context.getFilesDir().getPath()
"For those of you interested, the internal 8GB of storage on the phone
is mounted at /emmc (r/w mode, of course) and microSD cards still
shows up normally at /sdcard as expected." 

_ add to wiki - rename 'data' folder to 'assets' when inside eclipse
_ other useful tidbits (handlers etc)
_   http://developer.android.com/guide/appendix/faq/commontasks.html

_ simple example of reading the compass (also note that won't work w/ sim)
_ and also the gps, i assume (can do fake data w/ sim)

_ add hutch stuff to the wiki
http://lukehutch.wordpress.com/2010/01/06/my-multi-touch-code-ported-to-eclair/

_ maybe the back button shouldn't quit apps, the home button should?
_   back button use in apps is so infuriating...

P1 _ exceptions with StreamPump and adb devices on osx and linux
P1 _   http://dev.processing.org/bugs/show_bug.cgi?id=1545
P1 _   http://dev.processing.org/bugs/show_bug.cgi?id=1527
P1 _ implement certificates (self-signed) for distribution
P1 _   http://developer.android.com/guide/publishing/app-signing.html
P1 _   http://dev.processing.org/bugs/show_bug.cgi?id=1430
P1 _   http://code.google.com/p/processing/issues/detail?id=222

P3 _ Errors show up that .java files are duplicates with the Android tools.
P3 _   problem is with the packages and where the preproc is putting the file
P3 _   example sketch added to bug report
P3 _   http://dev.processing.org/bugs/show_bug.cgi?id=1472
P3 _   http://code.google.com/p/processing/issues/detail?id=232

_ seems to have problems on 64-bit windows 
_   removing local version of java helped someone fix it

_ remove 'import processing.opengl.*' in the preprocessor?

_ may need to add screen orientation as a built-in function
_   fairly common to use, and otherwise needs an obscure import

_ additional manifest gui necessary:
_   icons are apparently important
_   android:icon and android:label in <application>
_   http://developer.android.com/guide/practices/ui_guidelines/icon_design.html
_   setting the default package
_   some sort of warning re: messing with AndroidManifest.xml
_   Remove the android:debuggable="true" attribute from <application>
_   http://developer.android.com/guide/publishing/preparing.html

"Medium-density assets go in a res/drawable-mdpi/ directory 
(or in the default res/drawable/ directory),"

icon.png, icon-hdpi, icon-ldpi, icon-mdpi

android:icon="@drawable/app_notes"
./res/drawable-hdpi/app_notes.png -> 72x72
./res/drawable-hdpi-v6/app_notes.png
./res/drawable-ldpi-v6/app_notes.png -> 36x36
./res/drawable-mdpi/app_notes.png -> 48x48
./res/drawable-mdpi-v6/app_notes.png

android:icon="@drawable/app_lunar_lander"
./res/drawable/app_lunar_lander.png -> 64x64

JetBoy... <application android:icon="@drawable/icon"
res/drawable/icon.png -> 48x48

_ also for the wiki:
_   add information about permissions, since loadStrings() will break
_ add information to wiki about preparing apps for release
_   http://developer.android.com/guide/publishing/preparing.html

_ don't let the keystore message show up in red
_   Using keystore: /Users/fry/.android/debug.keystore

_ post processing-android-core-0190.zip to the download page
_   get some help w/ the dist script to make the right file

_ copy the changes over from the xml library

_ when starting the emulator, the adb server gets reset
_   then it causes this exception, which kills the thread waiting for input
_   so another reset is necessary
Exception in thread "StreamPump 49" java.lang.RuntimeException: Inside processing.app.exec.StreamPump@1ebe8ec for out: adb devices
	at processing.app.exec.StreamPump.run(StreamPump.java:82)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:637)
Caused by: java.io.IOException: Stream closed
	at java.io.BufferedInputStream.getBufIfOpen(BufferedInputStream.java:145)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:255)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
	at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
	at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
	at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
	at java.io.InputStreamReader.read(InputStreamReader.java:167)
	at java.io.BufferedReader.fill(BufferedReader.java:136)
	at java.io.BufferedReader.readLine(BufferedReader.java:299)
	at java.io.BufferedReader.readLine(BufferedReader.java:362)
	at processing.app.exec.StreamPump.run(StreamPump.java:71)
	... 3 more

_ major issue with sketches not quitting out of the run loop in background
_   pause needs to actually kill the thread
_   returning from pause needs to reset the clock
_   this is currently draining batteries

_ look into touch event code, see if there's a good way to integrate
_ add registered methods again
_   need to figure out generic event queueing first
_   may need a different subset of methods, and introduce new ones
_     that will be usable on both android and desktop
_ add line for export in libraries to say whether they're compatible
_   even just 'android=' will be ok

_ possibility of doing a compile (not run) using straight javac?
_   this would be a faster way to check for errors
_   w/o needing to use the incredibly slow android tools

_ "Unable to resolve target 'Google...'" when APIs aren't installed
_   add an error message that explains what to do

_ for libraries that don't work with android, don't let them export
_   e.g. people adding the opengl library when it's not needed
_   http://dev.processing.org/bugs/show_bug.cgi?id=1524

_ error messages in runner that are handled special (OOME) need different
_   handling for android vs others.. argh

_ test controlp5 with android

_ make size() work to place the component at the center of the screen
_ make size() work to change the renderer
_ how does size work? 
_   if size() method is used, things are scaled based on that
_   if no size() method, then the full screen/full resolution is used
_   make apps properly handle screen resize
_ PShape examples are totally broken
_ get core.zip out of svn (once tool is separate, modes stuff working etc)
_ if sketchRenderer() et al are used in android, need to add to desktop
_ remove SurfaceView2D/SurfaceView3D separation, or clean up
_ what is resetLights() in PGraphics?
_ remove model() method from end of PApplet (make it shape(PShape))

P1 this is embarrassing, need to fix ASAP
P2 need to fix before beta release
P3 would like to fix before final release
P4 not an immediate need, but very nice to have
P5 nice to have

android bugs, sorted by priority
http://dev.processing.org/bugs/buglist.cgi?bug_status=&field0-0-0=product&type0-0-0=substring&value0-0-0=android&field0-0-1=component&type0-0-1=substring&value0-0-1=android&field0-0-2=short_desc&type0-0-2=substring&value0-0-2=android&field0-0-3=status_whiteboard&type0-0-3=substring&value0-0-3=android&query_format=advanced&order=bugs.priority,bugs.bug_status%2Cbugs.bug_id&query_based_on=

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 


CORE (PApplet, P2D et al)

P2 _ too many temporary objects (particularly w/ color) created with A2D
P2 _   http://dev.processing.org/bugs/show_bug.cgi?id=1399

P3 _ implement createGraphics() for A2D/P3D/OPENGL
P3 _   http://dev.processing.org/bugs/show_bug.cgi?id=1488
P3 _ remove processing.opengl.* classes and finish PGraphicsAndroid3D
P3 _   http://dev.processing.org/bugs/show_bug.cgi?id=1401

P3 _ mouseClicked() is currently missing
P3 _   implement tap methods to handle mouseClicked() 
P3 _   http://dev.processing.org/bugs/show_bug.cgi?id=1406
P3 _ check on multiple pointers and multi-touch
P3 _   http://dev.processing.org/bugs/show_bug.cgi?id=1491

P4 _ when returning to the application after link(), screen stays blank
P4 _   http://dev.processing.org/bugs/show_bug.cgi?id=1484
P4 _ excessive rotation of application causes memory to run out
P4 _   this probably means that some memory isn't being freed that should be
P4 _   new window and surfaceview objects are being created in onCreate
P4 _     so they should probably be taken down in onDestroy.. but how?
P4 _   http://dev.processing.org/bugs/show_bug.cgi?id=1480
P4 _ values for pmouseX/Y aren't great
P4 _   Examples > Topics > Drawing > Continuous Lines shows gaps
P4 _   http://dev.processing.org/bugs/show_bug.cgi?id=1486

P5 _ Examples > Topics > Effects > Lens uses a ton of memory
P5 _ resize() needs to use the android resize stuff
P5 _   right now using the rather than expensive copy()
P5 _   instead, create a new resized bitmap, and get rid of pixels[]
P5 _   http://dev.processing.org/bugs/show_bug.cgi?id=1487
P5 _ should alpha PImage stuff use a non-4byte config?
P5 _   http://dev.processing.org/bugs/show_bug.cgi?id=1490
DL _ colorMode() error 
DL _   http://code.google.com/p/processing/issues/detail?id=223


. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 


TOOLS 

// jdf maybedone
_ only send error text to System.err (i.e. "Launching emulator" is not an error)
_   send these debug log messages to System.out

// jdf maybedone
_ "Sketch started on emulator" in spite of the emulator only halfway booted
_   sent email about this one

// jdf don't understand
_ errors in ActivityManager aren't coming through

_ if AVD is deleted while processing still running, things flake out
_   also no error messages, just 'giving up on launching emulator'

// jdf maybedone
_ when out of memory, need an error message to show up in the PDE
_   show "OutOfMemoryError: bitmap size exceeds VM budget" in status area
_   Examples > Topics > Drawing > Animator produces:
_   Uncaught handler: thread Animation Thread exiting due to uncaught exception
_   java.lang.OutOfMemoryError: bitmap size exceeds VM budget
_     at android.graphics.Bitmap.nativeCreate(Native Method)

// jdf maybedone
_ stack overflow produced no error inside the PDE
_   probably same as memory error above

// jdf maybedone
_ if hitting 'run' in p5, need to kill any sketch that's currently running

_ need to make data folder copy more efficient than just copying everything
_   right now, first copies to src inside Build.java (which then copies to bin)

// jdf maybedone
_ other exceptions coming through System.err
W/System.err(  242): java.lang.IllegalArgumentException: File /data/data/processing.android.test.savemanyimages/files/circles-0001.tif contains a path separator
W/System.err(  242): 	at android.app.ApplicationContext.makeFilename(ApplicationContext.java:1444)
W/System.err(  242): 	at android.app.ApplicationContext.openFileOutput(ApplicationContext.java:386)
W/System.err(  242): 	at android.content.ContextWrapper.openFileOutput(ContextWrapper.java:158)
W/System.err(  242): 	at processing.core.PApplet.createOutput(PApplet.java:3677)

android menu (need to discuss) 
_ reset adb
_ something to bring up the full console window
_ signing tool
_ selection of which avd (emulator), or plugged-in devices (if multiple)
_ run the 'android' application (since finding its location is painful)

P2 _ need to prevent hitting 'run' twice (threaded, so would work)
P2 _   currently things just keep restarting the build, bad state
P2 _   http://dev.processing.org/bugs/show_bug.cgi?id=1387
P2 _ move the android tools into its own source package in SVN
P2 _   started, but needs proper Tool or Mode packaging
P2 _   http://dev.processing.org/bugs/show_bug.cgi?id=1388
P2 _ implement method for selecting the AVD
P2 _   http://dev.processing.org/bugs/show_bug.cgi?id=1390
P2 _ android mode is currently per-editor (and clunky)
P2 _   http://dev.processing.org/bugs/show_bug.cgi?id=1379
P2 _ save state re: whether sketches are android or java mode (or others?)
P2 _   http://dev.processing.org/bugs/show_bug.cgi?id=1380

_ compiler errors on Windows not appearing, nor highlighting the line number
_   http://code.google.com/p/processing/issues/detail?id=253

P3 _ remove various debug messages on the console
P3 _   right now, there are too many places where errors occur
P3 _   http://dev.processing.org/bugs/show_bug.cgi?id=1385
P3 _ for now, only runs on the first device (findDevice()) found
P3 _   --> implement selector to choose the default device for debugging
P3 _   http://dev.processing.org/bugs/show_bug.cgi?id=1389
P3 _ if different machines, debug.keystore changes, requiring manual removal
P3 _   or find a way to do it automatically with processing
P3 _     can't keep it with the sketch, don't want to give away private key
P3 _   with different machines, users are required to remove signature
P3 _   add a method to remove an application if the debug key is different
P3 _     perhaps the first time an application is installed, remove it?
P3 _   http://dev.processing.org/bugs/show_bug.cgi?id=1481
P3 _ library support also needs android manifest changes
P3 _   http://dev.processing.org/bugs/show_bug.cgi?id=1439

P4 _ don't require android tools to be installed already
P4 _   or implement automatic download/install of android tools
P4 _   http://dev.processing.org/bugs/show_bug.cgi?id=1383

P5 _ remove the need for a "Reset Android" menu option
P5 _   might need to just put this in the menu for times when things go weird
P5 _   http://dev.processing.org/bugs/show_bug.cgi?id=1392


. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 


SAVED FOR LATER

DL _ add clear and close to all stream methods?
DL _   http://code.google.com/p/processing/issues/detail?id=244

EH _ separate "PApplet" into separate View and Activity classes
EH _   http://code.google.com/p/processing/issues/detail?id=212
EM _ remove unnecessary processing.xml.* code from android-core
EM _   http://code.google.com/p/processing/issues/detail?id=214
EM _ implement size() and createGraphics() for arbitrary renderers
EM _   http://code.google.com/p/processing/issues/detail?id=241


. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 


OPTIMIZE / ENHANCEMENTS

_ don't re-calculate stroke() or fill() when it's the same value
_ should path.reset() or path.rewind() be used for a path to be reused?

_ errors that cause a crash when setting sketchPath
_   seems to be a filesystem that got too full
_   no real signs of what went wrong, but deleting the avd fixed it
_   if it reappears again, trap that condition, and tell the user the fix

_ prevent rotation of applications? (or require a certain orientation)
_   add to activity tag in the manifest:
android:configChanges="keyboardHidden|orientation"
android:screenOrientation="landscape"
_   or programmatically specify:
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

get the dpi of the screen
http://developer.android.com/reference/android/util/DisplayMetrics.html

_ show/hide the virtual keyboard
InputMethodManager imm = 
  (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.showSoftInput(surfaceView, 0);

_ list contents of data folder (assets folder)
      try {
        PApplet.println(assets.list(""));
      } catch (IOException e) {
        e.printStackTrace();
      }

_ excessive memory use indicator
_   D/dalvikvm( 1205): GC freed 814 objects / 523352 bytes in 58ms
_   could help show when lots of memory are being used

try {
    File root = Environment.getExternalStorageDirectory();
    if (root.canWrite()){
        File gpxfile = new File(root, "gpxfile.gpx");
        FileWriter gpxwriter = new FileWriter(gpxfile);
        BufferedWriter out = new BufferedWriter(gpxwriter);
        out.write("Hello world");
        out.close();
    }
} catch (IOException e) {
    Log.e(TAG, "Could not write file " + e.getMessage());
}
